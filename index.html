<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SmashHub - Badminton Gear</title>
<style>
body{font-family:Arial,sans-serif;margin:0;background:#f8faf8;color:#111;}
.nav{background:linear-gradient(90deg,#047857,#10b981);color:#fff;padding:14px 20px;display:flex;align-items:center;gap:16px;position:sticky;top:0;z-index:10;}
.nav .brand{font-weight:800;font-size:1.2rem;}
.nav .menu{display:flex;gap:20px;}
.nav .menu-item{position:relative;cursor:pointer;padding:6px 12px;border-radius:6px;}
.nav .menu-item:hover{background:rgba(255,255,255,0.2);}
.nav .submenu{display:none;position:absolute;top:36px;left:0;background:#fff;color:#047857;border-radius:8px;box-shadow:0 4px 8px rgba(0,0,0,0.2);min-width:120px;flex-direction:column;z-index:20;}
.nav .submenu div{padding:6px 12px;cursor:pointer;}
.nav .submenu div:hover{background:#f0f0f0;}
.nav .menu-item:hover .submenu{display:flex;flex-direction:column;}
.nav input{margin-left:auto;padding:6px 12px;border-radius:999px;border:none;width:200px;}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px;max-width:1100px;margin:20px auto;padding:0 20px;}
.card{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 4px 16px rgba(0,0,0,0.06);display:flex;flex-direction:column;}
.card img{width:100%;height:200px;object-fit:cover;}
.card .body{padding:12px;display:flex;flex-direction:column;gap:8px;}
.card .brandline{display:flex;justify-content:space-between;color:#555;font-size:0.9rem;}
.card button{padding:8px;border:none;border-radius:8px;background:#047857;color:#fff;font-weight:700;cursor:pointer;}
.modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:none;align-items:center;justify-content:center;padding:20px;}
.modal{max-width:700px;width:100%;background:#fff;border-radius:12px;overflow:hidden;}
.modal .content{display:grid;grid-template-columns:1fr 1fr;gap:12px;padding:16px;}
.modal img{width:100%;height:100%;object-fit:cover;border-radius:8px;}
.modal .meta{display:flex;flex-direction:column;gap:8px;}
.modal .close{margin-left:auto;padding:6px;border:none;background:#eee;border-radius:8px;cursor:pointer;}
footer{background:#fff;border-top:1px solid #eee;padding:14px;text-align:center;color:#666;}
@media(max-width:700px){.modal .content{grid-template-columns:1fr;}}
</style>
</head>
<body>

<header class="nav">
  <div class="brand">SmashHub</div>
  <div class="menu">
    <div class="menu-item" onclick="applyCategory('All')">All</div>
    
    <div class="menu-item">Badminton
      <div class="submenu">
        <div onclick="applyBrand('Yonex')">Yonex</div>
        <div onclick="applyBrand('Li-Ning')">Li-Ning</div>
        <div onclick="applyBrand('Victor')">Victor</div>
      </div>
    </div>
    
    <div class="menu-item">Shoes
      <div class="submenu">
        <div onclick="applyBrand('Yonex')">Yonex</div>
        <div onclick="applyBrand('Li-Ning')">Li-Ning</div>
        <div onclick="applyBrand('Victor')">Victor</div>
      </div>
    </div>
    
    <div class="menu-item">Strings
      <div class="submenu">
        <div onclick="applyBrand('Yonex')">Yonex</div>
        <div onclick="applyBrand('Li-Ning')">Li-Ning</div>
        <div onclick="applyBrand('Victor')">Victor</div>
      </div>
    </div>
    
    <div class="menu-item">Bag
      <div class="submenu">
        <div onclick="applyBrand('Yonex')">Yonex</div>
        <div onclick="applyBrand('Li-Ning')">Li-Ning</div>
        <div onclick="applyBrand('Victor')">Victor</div>
      </div>
    </div>

    <div class="menu-item">Accessories
      <div class="submenu">
        <div onclick="applyBrand('Yonex')">Yonex</div>
        <div onclick="applyBrand('Li-Ning')">Li-Ning</div>
        <div onclick="applyBrand('Victor')">Victor</div>
      </div>
    </div>

    <div class="menu-item" onclick="applyCategory('Location')">Location</div>
  </div>
  <input type="text" id="search" placeholder="Search..." oninput="applySearch()">
</header>

<main class="grid" id="grid"></main>

<div class="modal-backdrop" id="modalBack" onclick="closeModal(event)">
  <div class="modal">
    <div style="display:flex;justify-content:space-between;align-items:center;padding:10px;border-bottom:1px solid #eee">
      <strong id="mtitle">Product</strong>
      <button class="close" onclick="closeModal(true)">✕</button>
    </div>
    <div class="content">
      <img id="mimg" src="" alt="">
      <div class="meta">
        <div id="mname" style="font-weight:800"></div>
        <div class="brandline"><span id="mbrand"></span><span id="mprice"></span></div>
        <div id="mspecs" style="color:#555;"></div>
        <div style="display:flex;gap:8px;margin-top:8px;">
          <button id="copyBtn">Copy Order Text</button>
          <a id="mailto" target="_blank" style="padding:8px;border:1px solid #ddd;border-radius:8px;text-decoration:none;color:#555;">Email to Order</a>
        </div>
      </div>
    </div>
  </div>
</div>

<footer>© <span id="year"></span> SmashHub — No cart, order via email</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
<script>
document.getElementById('year').textContent = new Date().getFullYear();

// Google Sheet CSV links per brand
const SHEETS = {
  "Yonex": "https://docs.google.com/spreadsheets/d/e/2PACX-1vTyOxyhvA3RPlASauijohIlRS8O7fBqwaWw0LojpZwIMzntZEzLM_Qq2sxHJ2hA-PMyYLNzrUAQoyHT/pub?gid=0&single=true&output=csv",
  "Li-Ning": "https://docs.google.com/spreadsheets/d/e/2PACX-1vTyOxyhvA3RPlASauijohIlRS8O7fBqwaWw0LojpZwIMzntZEzLM_Qq2sxHJ2hA-PMyYLNzrUAQoyHT/pub?gid=1964036999&single=true&output=csv",
  "Victor": "https://docs.google.com/spreadsheets/d/e/2PACX-1vTyOxyhvA3RPlASauijohIlRS8O7fBqwaWw0LojpZwIMzntZEzLM_Qq2sxHJ2hA-PMyYLNzrUAQoyHT/pub?gid=1101170186&single=true&output=csv"
};

let products = [];
let filters = { category: "All", brand: "All", search: "" };

// Fetch all sheets
async function fetchSheets() {
  products = [];
  for (const [brand, url] of Object.entries(SHEETS)) {
    await new Promise((resolve, reject) => {
      Papa.parse(url, {
        download: true,
        header: true,
        complete: function(results) {
          results.data.forEach(p => {
            if(p.Name) products.push({
              Name: p.Name,
              Brand: brand,
              Category: p.Category || "Accessories",
              Price: parseFloat(p.Price) || 0,
              Image: p.Image || "",
              Specs: p.Specs || ""
            });
          });
          resolve();
        },
        error: function(err){ console.error(err); reject(err); }
      });
    });
  }
  render();
}

// Render products
function render() {
  const grid = document.getElementById('grid');
  grid.innerHTML = "";
  let list = products.slice();

  if(filters.category !== "All" && filters.category !== "Location") list = list.filter(p => p.Category === filters.category);
  if(filters.brand !== "All") list = list.filter(p => p.Brand === filters.brand);
  if(filters.search) list = list.filter(p => p.Name.toLowerCase().includes(filters.search.toLowerCase()));

  list.forEach(p => {
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <img src="${p.Image}" alt="${p.Name}">
      <div class="body">
        <div style="font-weight:800">${p.Name}</div>
        <div class="brandline"><span>${p.Brand}</span><span>$${p.Price.toFixed(2)}</span></div>
        <button onclick='openModal(${JSON.stringify(p)})'>View</button>
      </div>
    `;
    grid.appendChild(card);
  });
}

// Filters
function applyCategory(cat){ filters.category = cat; filters.brand="All"; render(); }
function applyBrand(brand){ filters.brand = brand; render(); }
function applySearch(){ filters.search = document.getElementById('search').value; render(); }

// Modal
function openModal(p){
  document.getElementById('modalBack').style.display="flex";
  document.getElementById('mtitle').textContent=p.Name;
  document.getElementById('mimg').src=p.Image;
  document.getElementById('mname').textContent=p.Name;
  document.getElementById('mbrand').textContent=p.Brand+" · "+p.Category;
  document.getElementById('mprice').textContent="$"+p.Price.toFixed(2);
  document.getElementById('mspecs').textContent=p.Specs;
  document.getElementById('copyBtn').onclick=()=>{navigator.clipboard.writeText(orderText(p)).then(()=>alert("Copied!"));}
  document.getElementById('mailto').href="mailto:sales@smashhub.example?subject=Order: "+encodeURIComponent(p.Name)+"&body="+encodeURIComponent(orderText(p));
}

function closeModal(e){ if(e===true||e.target.id==='modalBack'){document.getElementById('modalBack').style.display="none"; } }
function orderText(p){ return `I'd like to order:\n${p.Name}\nBrand: ${p.Brand}\nCategory: ${p.Category}\nPrice: $${p.Price}\nSpecs: ${p.Specs}`; }

fetchSheets();
</script>
</body>
</html>
